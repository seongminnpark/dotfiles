webpackJsonp([7],{0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function fetchInitialData(){return _bluebird2["default"].all([(0,_getUser2["default"])()]).spread(function(resp){resp&&(_state2["default"].set("session",_lodash2["default"].get(resp,"session")),_state2["default"].set("events",_lodash2["default"].get(resp,"settings.events")),_state2["default"].set("settings",_lodash2["default"].get(resp,"settings")),_state2["default"].set("pageViewId",window.__wb_page_view_id),_state2["default"].set("tabId",_lodash2["default"].get(resp,"tabId")))})}var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),checkForHotel=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(data){var hotel;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_findHotel2["default"])(data);case 2:hotel=_context.sent,_lodash2["default"].isArray(hotel)&&hotel.length?((0,_setBrowserAction2["default"])({active:!0}),_state2["default"].set("hotelView",{hotels:hotel}),(0,_loadApp2["default"])({initialRoute:"/hotel",cssUrl:"GENERATED/hotel.css",route:_react2["default"].createElement(_reactRouter.Route,{path:"hotel",component:_Hotel2["default"]})})):hotel&&hotel.discount&&((0,_setBrowserAction2["default"])({active:!0}),_state2["default"].set("hotelView",{hotel:hotel}),(0,_loadApp2["default"])({initialRoute:"/hotel",cssUrl:"GENERATED/hotel.css",route:_react2["default"].createElement(_reactRouter.Route,{path:"hotel",component:_Hotel2["default"]})}));case 4:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}(),init=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,fetchInitialData();case 2:return _context2.prev=2,_context2.next=5,(0,_hotels2["default"])();case 5:data=_context2.sent,data&&!data.error&&checkForHotel(data),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2["catch"](2),console.log(_context2.t0);case 12:case"end":return _context2.stop()}},_callee2,this,[[2,9]])}));return function(){return _ref2.apply(this,arguments)}}(),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_Hotel=__webpack_require__(869),_Hotel2=_interopRequireDefault(_Hotel),_reactRouter=__webpack_require__(315),_loadApp=__webpack_require__(373),_loadApp2=_interopRequireDefault(_loadApp),_setBrowserAction=__webpack_require__(185),_setBrowserAction2=_interopRequireDefault(_setBrowserAction),_findHotel=__webpack_require__(872),_findHotel2=_interopRequireDefault(_findHotel),_state=__webpack_require__(141),_state2=_interopRequireDefault(_state),_hotels=__webpack_require__(873),_hotels2=_interopRequireDefault(_hotels),_getUser=__webpack_require__(632),_getUser2=_interopRequireDefault(_getUser),_bluebird=__webpack_require__(148),_bluebird2=_interopRequireDefault(_bluebird),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash);"loading"!==document.readyState?init():document.addEventListener("DOMContentLoaded",init)},869:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(92),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(96),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(97),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(100),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(102),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_reactMotion=__webpack_require__(103),_baobab=__webpack_require__(121),_sendMetric=__webpack_require__(134),_sendMetric2=_interopRequireDefault(_sendMetric),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_currency=__webpack_require__(811),_currency2=_interopRequireDefault(_currency),_nodeUuid=__webpack_require__(387),_visitHotel=__webpack_require__(870),_visitHotel2=_interopRequireDefault(_visitHotel);__webpack_require__(871);var Hotel=function(_Component){function Hotel(){var _ref;(0,_classCallCheck3["default"])(this,Hotel);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=(0,_possibleConstructorReturn3["default"])(this,(_ref=Hotel.__proto__||(0,_getPrototypeOf2["default"])(Hotel)).call.apply(_ref,[this].concat(args)));return _this.state={hideNotification:!0},_this}return(0,_inherits3["default"])(Hotel,_Component),(0,_createClass3["default"])(Hotel,[{key:"componentDidMount",value:function(){var _this2=this;(0,_sendMetric2["default"])("page","hotelNotification",{view:"hotelNotification",type:"notification",domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,offerSignUp:_lodash2["default"].get(this.props.view,"offerSignUp"),qualified:_lodash2["default"].get(this.props.view,"qualified",!1),balance:_lodash2["default"].get(this.props.view,"balance",0)}),setTimeout(function(){_this2.setState({hideNotification:!1})},1e3)}},{key:"render",value:function(){var _this3=this,hideNotification=this.state.hideNotification,_$get=_lodash2["default"].get(this.props,"view.hotel",{}),title=_$get.title,discount=_$get.discount,url=_$get.url,hotels=_lodash2["default"].get(this.props,"view.hotels",[]),showOnTop=!0,showOnRight=!0;return _react2["default"].createElement("div",{className:hideNotification?"disabled hotel-page":"hotel-page",style:{top:showOnTop?"0":"auto",bottom:showOnTop?"auto":"0",left:showOnRight?"auto":"0",right:showOnRight?"0":"auto"}},_react2["default"].createElement(_reactMotion.Motion,{style:{opacity:(0,_reactMotion.spring)(hideNotification?0:1,{stiffness:180,damping:20}),y:(0,_reactMotion.spring)(hideNotification?showOnTop?-100:100:0,{stiffness:180,damping:20})}},function(_ref2){var opacity=_ref2.opacity,y=_ref2.y;return _react2["default"].createElement("div",{className:"hotel-notification",style:{transform:"translate3d(0,"+y+"%,0)",opacity:""+opacity}},_react2["default"].createElement("header",null,_react2["default"].createElement("div",{className:"w-icon-logo"},_this3.renderWIcon()),_react2["default"].createElement("div",{className:"close icon-x",onClick:_this3.onClosePopup.bind(_this3,"x")})),hotels&&hotels.length?_react2["default"].createElement("section",null,_react2["default"].createElement("h2",null,"Same hotels and rooms, just more savings."),_lodash2["default"].map(hotels,function(_ref3,i){var title=_ref3.title,discount=_ref3.discount,url=_ref3.url,totalDiscount=_ref3.totalDiscount;return _react2["default"].createElement("div",{key:i,className:"hotel-list-item"},_react2["default"].createElement("div",null,_react2["default"].createElement("h3",null,title),_react2["default"].createElement("h4",null,"save ",(0,_currency2["default"])(discount,!0),"/night")),_react2["default"].createElement("div",{className:"primary-btn-small",onClick:_this3.onClickDeal.bind(_this3,url)},"save ",(0,_currency2["default"])(totalDiscount,!0)))})):_react2["default"].createElement("section",null,_react2["default"].createElement("h2",null,"save ",(0,_currency2["default"])(discount,!0),"/night on the exact same room."),_react2["default"].createElement("h4",null,title),_react2["default"].createElement("div",{className:"button-wrapper"},_react2["default"].createElement("button",{className:"primary-btn-large",onClick:_this3.onClickDeal.bind(_this3,url)},"view offer"))))}))}},{key:"onClickDeal",value:function(){function onClickDeal(_x){return _ref4.apply(this,arguments)}var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(url){var clickId,redirect;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:clickId=(0,_nodeUuid.v4)(),(0,_sendMetric2["default"])("trackClick","viewHotelDeal","view hotel",{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,clickId:clickId}),redirect=url+"&sid="+clickId,(0,_visitHotel2["default"])({redirect:redirect});case 4:case"end":return _context.stop()}},_callee,this)}));return onClickDeal}()},{key:"onClosePopup",value:function(label){this.setState({hideNotification:!0}),(0,_sendMetric2["default"])("trackClick","dismissHotelNotification",label,{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname})}},{key:"renderWIcon",value:function(){return _react2["default"].createElement("svg",{id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 60 45"},_react2["default"].createElement("g",null,_react2["default"].createElement("path",{d:"M39.4,35.9h-9L25,19.1h-0.1l-5.2,16.8h-9L1.3,8.8h9.6L15.7,26h0.1l4.9-17.2h8.9l5,17.2h0.1l4.8-17.2h9.3 L39.4,35.9z M57.7,31.6c0,0.7-0.1,1.4-0.4,2c-0.2,0.6-0.6,1.1-1,1.6c-0.4,0.4-1,0.8-1.7,1s-1.3,0.3-2,0.3c-1.5,0-2.7-0.5-3.7-1.4 c-1-0.9-1.4-2-1.4-3.5c0-0.7,0.1-1.3,0.4-1.8c0.2-0.7,0.6-1.3,1-1.6c0.8-0.7,1.4-1,1.7-1.1c0.9-0.3,1.6-0.4,2-0.4 c0.7,0,1.4,0.1,2,0.4c0.7,0.2,1.2,0.6,1.7,1c0.3,0.3,0.7,0.8,1.1,1.6C57.6,30.2,57.7,30.8,57.7,31.6z"})))}}]),Hotel}(_react.Component);exports["default"]=(0,_baobab.branch)({view:["hotelView"],events:["events"],session:["session"]},Hotel)},870:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("visitHotel",data)}},871:196,872:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("findHotel",data)}},873:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function initSite(){try{var domain=_tldjs2["default"].getDomain(window.location.href),result=__webpack_require__(874)("./"+domain+"/index");if(result)return result["default"]()}catch(e){return{error:"Site not supported"}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=initSite;var _tldjs=__webpack_require__(429),_tldjs2=_interopRequireDefault(_tldjs)},874:function(module,exports,__webpack_require__){function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){return map[req]||function(){throw new Error("Cannot find module '"+req+"'.")}()}var map={"./booking.com/index":875,"./expedia.com/index":876,"./hotels.com/index":877,"./kayak.com/index":878,"./priceline.com/index":879};webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=874},875:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function formatPrice(p){var amount=parseFloat(p.replace(/[^0-9]/g,""));return p.indexOf(".")!==-1?parseInt(amount):parseInt(100*amount)}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),runListPage=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var tries,items,checkIn,checkOut,nights,rooms,adults,children,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:tries=10,items=document.querySelectorAll(".sr_item");case 2:if(items||!(tries>0)){_context.next=9;break}return _context.next=5,(0,_delay2["default"])(500);case 5:items=document.querySelectorAll(".sr_item"),tries-=1,_context.next=2;break;case 9:if(items){_context.next=11;break}return _context.abrupt("return");case 11:return checkIn=(0,_moment2["default"])(new Date(document.querySelector(".--checkin-field .sb-date-field__display").innerText)),checkOut=(0,_moment2["default"])(new Date(document.querySelector(".--checkout-field .sb-date-field__display").innerText)),nights=checkOut.diff(checkIn,"days"),rooms=document.querySelector("#no_rooms").value,adults=document.querySelector("#group_adults").value,children=document.querySelector("#group_children").value,data=_lodash2["default"].map(items,function(item){var coords=item.querySelector(".address > a").getAttribute("data-coords").split(","),price=item.querySelector(".roomPrice .price");return{title:item.querySelector(".sr-hotel__name").innerText,address:"",price:Math.ceil((price&&price.innerText?formatPrice(price.innerText):0)/nights),checkIn:checkIn.format("MM/DD/YYYY"),checkOut:checkOut.format("MM/DD/YYYY"),rooms:rooms,adults:adults,children:children,latitude:coords[1],longitude:coords[0]}}),_context.abrupt("return",{type:"findMultiple",hotels:_lodash2["default"].take(_lodash2["default"].filter(data,function(h){return h.price>0}),10)});case 19:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}(),runHotelPage=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var tries,loaded,checkIn,checkOut,nights,rooms,adults,children,latLng,price,data;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:tries=10,loaded=document.querySelectorAll(".hp__hotel-name");case 2:if(loaded||!(tries>0)){_context2.next=9;break}return _context2.next=5,(0,_delay2["default"])(500);case 5:loaded=document.querySelectorAll(".hp__hotel-name"),tries-=1,_context2.next=2;break;case 9:if(loaded){_context2.next=11;break}return _context2.abrupt("return");case 11:return checkIn=(0,_moment2["default"])(new Date(document.querySelector(".--checkin-field .sb-date-field__display").innerText)),checkOut=(0,_moment2["default"])(new Date(document.querySelector(".--checkout-field .sb-date-field__display").innerText)),nights=checkOut.diff(checkIn,"days"),rooms=document.querySelector("#no_rooms").value,adults=document.querySelector("#group_adults").value,children=document.querySelector("#group_children").value,latLng=document.querySelector(".map_static_zoom").getAttribute("style").match(/center=([-0-9\.]+,[-0-9\.]+)/)[1].split(","),price=document.querySelector(".room_loop_counter1[data-occupancy] .roomDefaultUse .rooms-table-room-price"),data={title:document.querySelector(".hp__hotel-name").innerText,address:document.querySelector(".hp_address_subtitle").innerText,price:Math.ceil((price&&price.innerText?formatPrice(price.innerText):0)/nights),checkIn:checkIn.format("MM/DD/YYYY"),checkOut:checkOut.format("MM/DD/YYYY"),rooms:rooms,adults:adults,children:children,latitude:latLng[0],longitude:latLng[1]},_context2.abrupt("return",data);case 21:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}();exports["default"]=function(){if(location.href.match(/searchresults\.html|\/hotel\//i)&&(0,_hasFeature2["default"])("show_hotels_bookingcom"))return location.href.match(/searchresults\.html/)?runListPage():location.href.match(/\/hotel\//)?runHotelPage():void 0};var _delay=__webpack_require__(147),_delay2=_interopRequireDefault(_delay),_hasFeature=__webpack_require__(372),_hasFeature2=_interopRequireDefault(_hasFeature),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_moment=__webpack_require__(199),_moment2=_interopRequireDefault(_moment)},876:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function formatPrice(p){var amount=parseFloat(p.replace(/[^0-9]/g,""));return p.indexOf(".")!==-1?parseInt(amount):parseInt(100*amount)}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_findHotel=__webpack_require__(872),_findHotel2=_interopRequireDefault(_findHotel),_regex=__webpack_require__(146),_regex2=_interopRequireDefault(_regex),_delay=__webpack_require__(147),_delay2=_interopRequireDefault(_delay),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash);exports["default"]=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var map,data,latLong,components,latitude,longitude,title,address,checkIn,checkOut,rooms,adults,children,price,roomsEl,adultsEl,childrenEl,s,el,_data,tries,_map,_latLong,_data2;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(location.href.match(/Hotel-Information|Hotel-Search/i)){_context.next=2;break}return _context.abrupt("return");case 2:if(map=document.querySelector(".map > a > figure"),!map){_context.next=46;break}if(data=map.getAttribute("data-src"),!data){_context.next=44;break}if(latLong=(0,_regex2["default"])(/center=([-0-9\.]+,[-0-9\.]+)/,data),!latLong){_context.next=44;break}if(components=latLong.split(","),2!==components.length){_context.next=44;break}latitude=components[0].substr(0,8),longitude=components[1].substr(0,8),title=document.querySelector("h1").innerText.trim(),address=document.querySelector("#policies-and-amenities .full-address-container .street-address").innerText;case 14:if(document.querySelector("#availability-wizard")){_context.next=19;break}return _context.next=17,(0,_delay2["default"])(500);case 17:_context.next=14;break;case 19:checkIn=document.querySelector("#availability-check-in").value,checkOut=document.querySelector("#availability-check-out").value,rooms=1,adults=1,children=0,price=0;try{roomsEl=document.querySelector("#availability-wizard .rooms-selector"),rooms=_lodash2["default"].get(roomsEl,"value",1)}catch(e){}try{adultsEl=document.querySelector("#availability-wizard .adult-selector"),adults=_lodash2["default"].get(adultsEl,"value",1)}catch(e){}try{childrenEl=document.querySelector("#availability-wizard .children-selector"),children=_lodash2["default"].get(childrenEl,"value",0)}catch(e){}_context.prev=28,s=".price.link-to-rooms",el=document.querySelector(s);case 31:if(el){_context.next=37;break}return _context.next=34,(0,_delay2["default"])(500);case 34:el=document.querySelector(s),_context.next=31;break;case 37:price=formatPrice(_lodash2["default"].get(el,"innerText",0)),_context.next=42;break;case 40:_context.prev=40,_context.t0=_context["catch"](28);case 42:return _data={title:title,address:address,price:price,checkIn:checkIn,checkOut:checkOut,rooms:rooms,adults:adults,children:children,latitude:latitude,longitude:longitude},_context.abrupt("return",_data);case 44:_context.next=60;break;case 46:tries=10,_map=document.querySelector("#googleMapContainer .mapIcon");case 48:if(_map||!(tries>0)){_context.next=55;break}return _context.next=51,(0,_delay2["default"])(500);case 51:_map=document.querySelector("#googleMapContainer .mapIcon"),tries-=1,_context.next=48;break;case 55:if(_map){_context.next=57;break}return _context.abrupt("return");case 57:_latLong=_map.src.match(/visible=([-0-9\.]+),([-0-9\.]+)%7C([-0-9\.]+),([-0-9\.]+)/),_data2={checkIn:location.href.match(/startDate=([0-9\/%F]+)&/)[1].replace(/\//g,"%2F"),checkOut:location.href.match(/endDate=([0-9\/%F]+)&/)[1].replace(/\//g,"%2F"),adults:location.href.match(/adults=([0-9\/%F]+)&/)[1],rooms:"1",latLongs:[{latitude:_latLong[1],longitude:_latLong[2]},{latitude:_latLong[3],longitude:_latLong[4]}],type:"searchBetweenTwoPoints"},(0,_findHotel2["default"])(_data2);case 60:case"end":return _context.stop()}},_callee,this,[[28,40]])}))},877:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function formatPrice(p){var amount=parseFloat(p.replace(/[^0-9]/g,""));return p.indexOf(".")!==-1?parseInt(amount):parseInt(100*amount)}function isLoaded(){return document.querySelector(".property-address")}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_delay=__webpack_require__(147),_delay2=_interopRequireDefault(_delay),_moment=__webpack_require__(199),_moment2=_interopRequireDefault(_moment),_hasFeature=__webpack_require__(372),_hasFeature2=_interopRequireDefault(_hasFeature);exports["default"]=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var tries,loaded,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(location.href.match(/ho\d+\//i)&&(0,_hasFeature2["default"])("show_hotels_hotelscom")){_context.next=2;break}return _context.abrupt("return");case 2:tries=10,loaded=isLoaded();case 4:if(loaded||!(tries>0)){_context.next=11;break}return _context.next=7,(0,_delay2["default"])(500);case 7:loaded=isLoaded(),tries-=1,_context.next=4;break;case 11:if(loaded){_context.next=13;break}return _context.abrupt("return");case 13:return data={title:document.querySelector("h1").innerText,address:document.querySelector(".property-address").innerText,price:formatPrice(document.querySelector(".pricing .current-price").innerText),checkIn:(0,_moment2["default"])(new Date(document.querySelector("#totpq-localised-check-in").value)).format("MM/DD/YYYY"),checkOut:(0,_moment2["default"])(new Date(document.querySelector("#totpq-localised-check-out").value)).format("MM/DD/YYYY"),rooms:document.querySelector("#totpq-rooms").value,adults:document.querySelector("#totpq-room-0-adults").value,children:document.querySelector("#totpq-room-0-children").value,latitude:document.querySelector('[property="place:location:latitude"]').getAttribute("content"),longitude:document.querySelector('[property="place:location:longitude"]').getAttribute("content")},_context.abrupt("return",data);case 15:case"end":return _context.stop()}},_callee,this)}))},878:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function formatPrice(p){var amount=parseFloat(p.replace(/[^0-9]/g,""));return p.indexOf(".")!==-1?parseInt(amount):parseInt(100*amount)}function isLoaded(){return LOADED}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_delay=__webpack_require__(147),_delay2=_interopRequireDefault(_delay),_moment=__webpack_require__(199),_moment2=_interopRequireDefault(_moment),_hasFeature=__webpack_require__(372),_hasFeature2=_interopRequireDefault(_hasFeature),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),LOADED="loading"!==document.readyState;document.addEventListener("DOMContentLoaded",function(){LOADED=!0}),exports["default"]=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var tries,loaded,scripts,script,regex,matches,output,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(location.href.match(/hotels\//i)&&(0,_hasFeature2["default"])("show_hotels_kayak")){_context.next=2;break}return _context.abrupt("return");case 2:tries=10,loaded=isLoaded();case 4:if(loaded||!(tries>0)){_context.next=11;break}return _context.next=7,(0,_delay2["default"])(500);case 7:loaded=isLoaded(),tries-=1,_context.next=4;break;case 11:if(loaded){_context.next=13;break}return _context.abrupt("return");case 13:for(scripts=document.querySelectorAll('script[type="text/javascript"]'),script=_lodash2["default"].find(scripts,function(script){return(script.innerText||"").indexOf("R9.hotels.results.HotelResultInfoColumn")>-1}),regex=/R9\.hotels\.results\.HotelResultItem\(".*",[.*\s](\{.*)\);/g,matches=void 0,output=[];matches=regex.exec(script.innerText);)output.push(JSON.parse(matches[1]));return data=_lodash2["default"].map(output,function(hotel){return{title:hotel.name,address:"",price:formatPrice(hotel.displayPrice),checkIn:(0,_moment2["default"])(hotel.checkinDate).format("MM/DD/YYYY"),checkOut:(0,_moment2["default"])(hotel.checkoutDate).format("MM/DD/YYYY"),rooms:""+hotel.rooms,adults:""+hotel.guests,children:"0",latitude:""+hotel.latitude,longitude:""+hotel.longitude}}),_context.abrupt("return",{type:"findMultiple",hotels:data});case 21:case"end":return _context.stop()}},_callee,this)}))},879:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function formatPrice(p){var amount=parseFloat(p.replace(/[^0-9]/g,""));return p.indexOf(".")!==-1?parseInt(amount):parseInt(100*amount)}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(1),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_delay=__webpack_require__(147),_delay2=_interopRequireDefault(_delay),_hasFeature=__webpack_require__(372),_hasFeature2=_interopRequireDefault(_hasFeature);exports["default"]=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var tries,map,data;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(location.href.match(/stay\/search\/details/i)&&(0,_hasFeature2["default"])("show_hotels_pricelinecom")){_context.next=2;break}return _context.abrupt("return");case 2:tries=10,map=document.querySelector("[stay-hotel-location-map]");case 4:if(map||!(tries>0)){_context.next=11;break}return _context.next=7,(0,_delay2["default"])(500);case 7:map=document.querySelector("[stay-hotel-location-map]"),tries-=1,_context.next=4;break;case 11:if(map){_context.next=13;break}return _context.abrupt("return");case 13:return data={title:document.querySelector('input[name="location"]').value,address:document.querySelector(".location .address").innerText,price:formatPrice(document.querySelector(".price-section .item-price").innerText),checkIn:document.querySelector('[name="checkIn"] input').value,checkOut:document.querySelector('[name="checkOut"] input').value,rooms:document.querySelector("#roomCount").value,adults:document.querySelector('[name="hotelAdults"]').value,children:document.querySelector('[name="hotelChildren"]').value,latitude:map.getAttribute("latitude"),longitude:map.getAttribute("longitude")},_context.abrupt("return",data);case 15:case"end":return _context.stop()}},_callee,this)}))}});