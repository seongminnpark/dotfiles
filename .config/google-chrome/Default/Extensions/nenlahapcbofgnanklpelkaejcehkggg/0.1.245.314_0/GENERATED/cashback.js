webpackJsonp([0],{0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function fetchInitialData(){return _bluebird2["default"].all([(0,_getUser2["default"])(),(0,_siteCache2["default"])(),(0,_cashbackActions.initCashback)()]).spread(function(resp,siteAPIData,cashback){resp&&(_state2["default"].set("session",_lodash2["default"].get(resp,"session")),_state2["default"].set("events",_lodash2["default"].get(resp,"settings.events")),_state2["default"].set("settings",_lodash2["default"].get(resp,"settings")),_state2["default"].set("couponsDisabledSites",_lodash2["default"].get(resp,"couponsDisabledSites")),_state2["default"].set("couponsAffiliateDisabledSites",_lodash2["default"].get(resp,"couponsAffiliateDisabledSites")),_state2["default"].set("pageViewId",window.__wb_page_view_id),_state2["default"].set("tabId",_lodash2["default"].get(resp,"tabId"))),_state2["default"].merge({siteAPIData:siteAPIData}),_state2["default"].merge({cashback:cashback})})}var _extends2=__webpack_require__(1),_extends3=_interopRequireDefault(_extends2),_set=__webpack_require__(17),_set2=_interopRequireDefault(_set),_regenerator=__webpack_require__(57),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),init=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var cashback,domain,deweyResult;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetchInitialData();case 2:if(cashback=_state2["default"].get("cashback"),_state2["default"].set("cashbackVisible",!1),domain=_tldjs2["default"].getDomain(location.href),!(_state2["default"].get(["couponsDisabledSites",domain+"_"+_state2["default"].get("tabId")])>(0,_moment2["default"])().unix())){_context.next=7;break}return _context.abrupt("return",!1);case 7:(0,_setBrowserAction2["default"])({active:!!cashback,cashback:cashback}),deweyResult=_state2["default"].get(["deweyResult"]),checkCashBack(deweyResult),setupCashbackListener();case 11:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}(),setupCashbackListener=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:_dewey2["default"].emitter.on("result",function(result){checkCashBack(result)});case 1:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}(),checkCashBack=function(){var _ref3=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(deweyResult){var _ref4,siteData,cashback,settings,cashbackPrefs,showCashback,pageType,pagesToShowOn,notificationSetting,viewData;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!showingCashback&&deweyResult){_context3.next=2;break}return _context3.abrupt("return");case 2:return _context3.next=4,(0,_siteCache2["default"])();case 4:_ref4=_context3.sent,siteData=_ref4.siteData,cashback=_state2["default"].get("cashback"),settings=_state2["default"].get("settings"),cashbackPrefs=_lodash2["default"].get(settings,"notificationPreferences.cashbackPrefs"),showCashback=void 0,pageType=_lodash2["default"].get(deweyResult,"pageType"),cashbackPrefs?showCashback=cashbackPrefs.indexOf(pageType)!==-1:(pageType=_lodash2["default"].snakeCase(pageType),pagesToShowOn=new _set2["default"](siteData.cashback.minNotificationsPageTypes),showCashback=pagesToShowOn.has(pageType)||(0,_hasFeature2["default"])("product_page_cb_notif")&&"productPage"===pageType||(0,_hasFeature2["default"])("home_page_cb_notif")&&"homePage"===pageType||(0,_hasFeature2["default"])("search_page_cb_notif")&&"searchPage"===pageType,notificationSetting=_lodash2["default"].get(cashback,"user.notifications.notificationSetting"),showCashback="NONE"!==notificationSetting&&showCashback),cashback&&showCashback&&!_lodash2["default"].get(cashback,"user.activated")&&!_lodash2["default"].get(cashback,"user.dismissed")&&(viewData=_state2["default"].get("cashbackView")||cashback,_state2["default"].set("cashbackView",(0,_extends3["default"])({},viewData,{isCashbackURLMatch:showCashback,deweyResult:deweyResult})),showingCashback=!0,(0,_loadApp2["default"])({initialRoute:"/cashback",cssUrl:"GENERATED/cashback.css",route:_react2["default"].createElement(_reactRouter.Route,{path:"cashback",component:_Cashback2["default"]}),disableDelay:!0}),_state2["default"].set("cashbackVisible",!0));case 13:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}(),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_Cashback=__webpack_require__(90),_Cashback2=_interopRequireDefault(_Cashback),_reactRouter=__webpack_require__(317),_loadApp=__webpack_require__(375),_loadApp2=_interopRequireDefault(_loadApp),_state=__webpack_require__(141),_state2=_interopRequireDefault(_state),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_setBrowserAction=__webpack_require__(185),_setBrowserAction2=_interopRequireDefault(_setBrowserAction),_siteCache=__webpack_require__(475),_siteCache2=_interopRequireDefault(_siteCache),_hasFeature=__webpack_require__(374),_hasFeature2=_interopRequireDefault(_hasFeature),_tldjs=__webpack_require__(431),_tldjs2=_interopRequireDefault(_tldjs),_moment=__webpack_require__(199),_moment2=_interopRequireDefault(_moment),_cashbackActions=__webpack_require__(452),_dewey=__webpack_require__(476),_dewey2=_interopRequireDefault(_dewey),_bluebird=__webpack_require__(148),_bluebird2=_interopRequireDefault(_bluebird),_getUser=__webpack_require__(636),_getUser2=_interopRequireDefault(_getUser),showingCashback=!1;"loading"!==document.readyState?init():document.addEventListener("DOMContentLoaded",init)},90:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(57),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(91),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(95),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(96),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(99),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(101),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_reactMotion=__webpack_require__(102),_baobab=__webpack_require__(121),_sendMetric=__webpack_require__(134),_sendMetric2=_interopRequireDefault(_sendMetric),_cashbackActions=__webpack_require__(452),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_setSeenCashbackNotification=__webpack_require__(461),_setSeenCashbackNotification2=_interopRequireDefault(_setSeenCashbackNotification),_TooltipResolve=__webpack_require__(462),_TooltipResolve2=_interopRequireDefault(_TooltipResolve),_CashBackResolve=__webpack_require__(465),_CashBackResolve2=_interopRequireDefault(_CashBackResolve);__webpack_require__(474);var CashBack=function(_Component){function CashBack(){var _ref;(0,_classCallCheck3["default"])(this,CashBack);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=(0,_possibleConstructorReturn3["default"])(this,(_ref=CashBack.__proto__||(0,_getPrototypeOf2["default"])(CashBack)).call.apply(_ref,[this].concat(args)));return _this.state={hideNotification:!0},_this}return(0,_inherits3["default"])(CashBack,_Component),(0,_createClass3["default"])(CashBack,[{key:"componentWillReceiveProps",value:function(nextProps){this.props&&nextProps&&!this.props.warnAboutStandDown&&nextProps.warnAboutStandDown&&this.state.activated&&this.setState({hideNotification:!1,activated:!1,activating:!1,hasActivated:!0})}},{key:"componentDidMount",value:function(){var _this2=this;(0,_sendMetric2["default"])("page","cashbackNotification",{view:"cashbackNotification",type:"notification",domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,offerSignUp:_lodash2["default"].get(this.props.view,"offerSignUp"),qualified:_lodash2["default"].get(this.props.view,"qualified",!1),balance:_lodash2["default"].get(this.props.view,"balance",0)}),setTimeout(function(){_this2.setState({hideNotification:!1}),(0,_setSeenCashbackNotification2["default"])()},1e3)}},{key:"render",value:function(){var _this3=this,hideNotification=this.state.hideNotification,offerSignUp=_lodash2["default"].get(this.props.view,"offerSignUp"),storeName=_lodash2["default"].get(this.props.view,"vendor"),showOnTop=!0,showOnRight=!0;return _react2["default"].createElement("div",{className:hideNotification?"disabled cashback-page":"cashback-page",style:{top:showOnTop?"0":"auto",bottom:showOnTop?"auto":"0",left:showOnRight?"auto":"0",right:showOnRight?"0":"auto"}},_react2["default"].createElement(_reactMotion.Motion,{style:{opacity:(0,_reactMotion.spring)(hideNotification?0:1,{stiffness:180,damping:20}),y:(0,_reactMotion.spring)(hideNotification?showOnTop?-100:100:0,{stiffness:180,damping:20})}},function(_ref2){var opacity=_ref2.opacity,y=_ref2.y;return _react2["default"].createElement("div",{className:"cashback-notification",style:{transform:"translate3d(0,"+y+"%,0)",opacity:""+opacity}},_react2["default"].createElement("header",null,_react2["default"].createElement("div",{className:"w-icon-logo"},_this3.renderWIcon())),_react2["default"].createElement(_CashBackResolve2["default"],{view:_this3.props.view,hasActivated:_this3.state.hasActivated,warnAboutStandDown:_this3.props.warnAboutStandDown,reward:_lodash2["default"].get(_this3.props,"view.reward"),activated:_this3.state.activated,activating:_this3.state.activating,onActivateWarn:_this3.onActivateWarn.bind(_this3),session:_this3.props.session,showInitialSignup:_this3.state.showInitialSignup,activate:_this3.state.activate,onActivate:_this3.onActivate.bind(_this3),dismissNotification:function(){return _this3.setState({hideNotification:!0})},cta:"ok",onUserClosePopup:_this3.onUserClosePopup.bind(_this3),deweyResult:_lodash2["default"].get(_this3.props.view,"deweyResult")}))}),_react2["default"].createElement(_TooltipResolve2["default"],{showOnTop:showOnTop,showOnRight:showOnRight,offerSignUp:offerSignUp,storeName:storeName,hideNotification:hideNotification,onDismissTooltip:this.onDismissTooltip.bind(this),hasSeenCashbackSignupTip:_lodash2["default"].get(this.props,"events.hasSeenCashbackSignupTip"),hasSeenCashbackActivateTip:_lodash2["default"].get(this.props,"events.hasSeenCashbackActivateTip")}))}},{key:"onDismissTooltip",value:function(type){_lodash2["default"].get(this.props,"events."+type)||(0,_cashbackActions.setSeenNotificationTooltip)(type)}},{key:"onActivateWarn",value:function(){function onActivateWarn(){return _ref3.apply(this,arguments)}var _ref3=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var reward,resp,_this4=this;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return reward=_lodash2["default"].get(this.props.view,"reward",{}),(0,_sendMetric2["default"])("trackClick","activateCashback","reactivate",{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,rewardAmount:reward.amount,rewardDisplay:reward.type,reactivate:!0}),this.setState({activating:!0}),_context.next=5,(0,_cashbackActions.activateThroughPinnedTab)();case 5:resp=_context.sent,this.setState({activated:!0}),setTimeout(function(){_this4.setState({hideNotification:!0})},500),(0,_sendMetric2["default"])("track","activateCashbackRedirect",_lodash2["default"].assign({domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,rewardAmount:reward.amount,rewardDisplay:reward.type,reactivate:!0},resp));case 9:case"end":return _context.stop()}},_callee,this)}));return onActivateWarn}()},{key:"onActivate",value:function(){function onActivate(){return _ref4.apply(this,arguments)}var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var reward,resp,_this5=this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return reward=_lodash2["default"].get(this.props.view,"reward",{}),this.setState({activating:!0}),this.onDismissTooltip("hasSeenCashbackActivateTip"),(0,_sendMetric2["default"])("trackClick","activateCashback","activate",{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,rewardAmount:reward.amount,rewardDisplay:reward.type}),_context2.next=6,(0,_cashbackActions.activateThroughPinnedTab)();case 6:resp=_context2.sent,this.setState({activated:!0}),options.preventHide||setTimeout(function(){_this5.setState({hideNotification:!0})},500),(0,_sendMetric2["default"])("track","activateCashbackRedirect",_lodash2["default"].assign({domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,rewardAmount:reward.amount,rewardDisplay:reward.type},resp));case 10:case"end":return _context2.stop()}},_callee2,this)}));return onActivate}()},{key:"onUserClosePopup",value:function(label){(_lodash2["default"].get(this.props.view,"user.hasSeenFirst")||_lodash2["default"].get(this.props.view,"isCashbackURLMatch"))&&(0,_cashbackActions.dismiss)(),this.setState({hideNotification:!0}),_lodash2["default"].get(this.props.view,"offerSignUp")?this.onDismissTooltip("hasSeenCashbackSignupTip"):this.onDismissTooltip("hasSeenCashbackActivateTip"),(0,_sendMetric2["default"])("trackClick","dismissCashbackNotification",label,{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname})}},{key:"renderWIcon",value:function(){return _react2["default"].createElement("svg",{id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 60 45"},_react2["default"].createElement("g",null,_react2["default"].createElement("path",{d:"M39.4,35.9h-9L25,19.1h-0.1l-5.2,16.8h-9L1.3,8.8h9.6L15.7,26h0.1l4.9-17.2h8.9l5,17.2h0.1l4.8-17.2h9.3 L39.4,35.9z M57.7,31.6c0,0.7-0.1,1.4-0.4,2c-0.2,0.6-0.6,1.1-1,1.6c-0.4,0.4-1,0.8-1.7,1s-1.3,0.3-2,0.3c-1.5,0-2.7-0.5-3.7-1.4 c-1-0.9-1.4-2-1.4-3.5c0-0.7,0.1-1.3,0.4-1.8c0.2-0.7,0.6-1.3,1-1.6c0.8-0.7,1.4-1,1.7-1.1c0.9-0.3,1.6-0.4,2-0.4 c0.7,0,1.4,0.1,2,0.4c0.7,0.2,1.2,0.6,1.7,1c0.3,0.3,0.7,0.8,1.1,1.6C57.6,30.2,57.7,30.8,57.7,31.6z"})))}}]),CashBack}(_react.Component);exports["default"]=(0,_baobab.branch)({view:["cashbackView"],events:["events"],session:["session"],warnAboutStandDown:["warnAboutStandDown"]},CashBack)},461:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("setSeenCashbackNotification",data)}},462:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function TooltipResolve(_ref){var offerSignUp=_ref.offerSignUp,storeName=_ref.storeName,hideNotification=_ref.hideNotification,showOnTop=_ref.showOnTop,showOnRight=_ref.showOnRight,onDismissTooltip=_ref.onDismissTooltip,hasSeenCashbackSignupTip=_ref.hasSeenCashbackSignupTip,hasSeenCashbackActivateTip=_ref.hasSeenCashbackActivateTip;return _react2["default"].createElement("div",null,hasSeenCashbackSignupTip||!offerSignUp||hideNotification?null:_react2["default"].createElement(_Tooltip2["default"],{tip:!0,message:_react2["default"].createElement("span",null,"Wikibuy can help you save ",_react2["default"].createElement("br",null),"on ",storeName," today, just click activate. It's easy and free money."),delay:"1500ms",style:{top:showOnTop?"15px":"auto",bottom:showOnTop?"auto":"15px",width:"461px",left:showOnRight?"auto":"320px",right:showOnRight?"320px":"auto"},onDismissTooltip:onDismissTooltip.bind(null,"hasSeenCashbackSignupTip")}),hasSeenCashbackActivateTip||offerSignUp||hideNotification?null:_react2["default"].createElement(_Tooltip2["default"],{tip:!0,tipLabel:"wikibuy tip:",message:_react2["default"].createElement("span",null,"Just click when you see ",_react2["default"].createElement("br",null),"this to get free money, seriously."),delay:"1500ms",style:{top:showOnTop?"15px":"auto",bottom:showOnTop?"auto":"15px",width:"468px",left:showOnRight?"auto":"320px",right:showOnRight?"320px":"auto"},onDismissTooltip:onDismissTooltip.bind(null,"hasSeenCashbackActivateTip")}))}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_Tooltip=__webpack_require__(463),_Tooltip2=_interopRequireDefault(_Tooltip);exports["default"]=TooltipResolve},465:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=__webpack_require__(1),_extends3=_interopRequireDefault(_extends2),_regenerator=__webpack_require__(57),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(91),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(95),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(96),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(99),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(101),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_sendMetric=__webpack_require__(134),_sendMetric2=_interopRequireDefault(_sendMetric),_CashBackSimpleVariant=__webpack_require__(466),_CashBackSimpleVariant2=_interopRequireDefault(_CashBackSimpleVariant),_cashbackActions=__webpack_require__(452);__webpack_require__(473);var CashBackResolve=function(_Component){function CashBackResolve(props){(0,_classCallCheck3["default"])(this,CashBackResolve);var _this=(0,_possibleConstructorReturn3["default"])(this,(CashBackResolve.__proto__||(0,_getPrototypeOf2["default"])(CashBackResolve)).call(this,props));return _this.state={shouldShowSettings:!1,shouldShowFewerNotificationsMessage:!1,shouldShowMoreInfo:!1,mousedOver:!1},_this.showSettings=_this.showSettings.bind(_this),_this.toggleMoreInfo=_this.toggleMoreInfo.bind(_this),_this.saveNotificationSettings=_this.saveNotificationSettings.bind(_this),_this}return(0,_inherits3["default"])(CashBackResolve,_Component),(0,_createClass3["default"])(CashBackResolve,[{key:"showSettings",value:function(){this.setState({shouldShowSettings:!0}),(0,_sendMetric2["default"])("trackClick","viewCashBackNotificationSettings")}},{key:"toggleMoreInfo",value:function(){this.setState({shouldShowMoreInfo:!this.state.shouldShowMoreInfo}),this.state.shouldShowMoreInfo&&(0,_sendMetric2["default"])("trackClick","viewCashBackMoreInfo")}},{key:"saveNotificationSettings",value:function(){function saveNotificationSettings(_x){return _ref.apply(this,arguments)}var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(notificationSetting){var isNotAlways,notificationSettings,_this2=this;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return isNotAlways="ALL"!==notificationSetting,this.setState({shouldShowSettings:!1,shouldShowFewerNotificationsMessage:isNotAlways}),isNotAlways&&setTimeout(function(){_this2.props.dismissNotification()},3e3),notificationSettings={notificationSetting:notificationSetting},_lodash2["default"].get(this.props.view,"user.notifications.firstTimeSeenDate")||(notificationSettings.firstTimeSeenDate=(new Date).toISOString()),_context.next=7,(0,_cashbackActions.saveNotificationSettings)(notificationSettings);case 7:(0,_sendMetric2["default"])("track","saveCashBackNotificationSettings",{setting:notificationSetting});case 8:case"end":return _context.stop()}},_callee,this)}));return saveNotificationSettings}()},{key:"render",value:function(){var props=(0,_extends3["default"])({},this.props,this.state,{showSettings:this.showSettings,toggleMoreInfo:this.toggleMoreInfo,saveNotificationSettings:this.saveNotificationSettings,userCBNotificationSetting:_lodash2["default"].get(this.props.view,"user.notifications.notificationSetting"),isFirstTimeOpeningSettings:!_lodash2["default"].get(this.props.view,"user.notifications.firstTimeSeenDate")});return _react2["default"].createElement("div",{className:"cash-back-resolve"},_react2["default"].createElement(_CashBackSimpleVariant2["default"],props))}}]),CashBackResolve}(_react.Component);exports["default"]=CashBackResolve},466:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function CashBackSimpleVariant(props){function onShowSettings(){var url=_constants.WIKIBUY_URL+"/account-settings/notifications?section=cashback";(0,_sendMetric2["default"])("trackClick","showSettingSiteHub","x",{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname}),window.open(url,"_blank")}var onUserClosePopup=props.onUserClosePopup;return _react2["default"].createElement("div",null,_react2["default"].createElement(_Gear2["default"],{onClick:onShowSettings,style:{position:"fixed"}}),_react2["default"].createElement(_RewardsActivation2["default"],props),_react2["default"].createElement("h4",{className:"bold activate-later tertiary-link",onClick:onUserClosePopup.bind(null,"activate later")},"activate later"))}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_constants=__webpack_require__(193),_RewardsActivation=__webpack_require__(467),_RewardsActivation2=_interopRequireDefault(_RewardsActivation),_Gear=__webpack_require__(471),_Gear2=_interopRequireDefault(_Gear),_sendMetric=__webpack_require__(134),_sendMetric2=_interopRequireDefault(_sendMetric);exports["default"]=CashBackSimpleVariant},467:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function RewardsActivation(props){var hasActivated=props.hasActivated,warnAboutStandDown=props.warnAboutStandDown,cta=props.cta,onActivate=props.onActivate,onSignup=props.onSignup,activated=props.activated,activating=props.activating,activate=props.activate,showInitialSignup=props.showInitialSignup,session=props.session,view=props.view,onActivateWarn=props.onActivateWarn,reward=props.reward,innerCopy=props.innerCopy,outerCopy=props.outerCopy,mousedOver=props.mousedOver,deweyResult=props.deweyResult;return _react2["default"].createElement("div",{className:"rewards-activation"},hasActivated&&warnAboutStandDown?_react2["default"].createElement(_WarnAboutCashback2["default"],{reward:reward,activated:activated,activating:activating,onActivateWarn:onActivateWarn}):_react2["default"].createElement(_CashbackSectionSimple2["default"],{view:view,session:session,showInitialSignup:showInitialSignup,activate:activate,activating:activating,activated:activated,onSignup:onSignup,onActivate:onActivate,cta:cta,innerCopy:innerCopy,outerCopy:outerCopy,mousedOver:mousedOver,deweyResult:deweyResult}))}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_WarnAboutCashback=__webpack_require__(468),_WarnAboutCashback2=_interopRequireDefault(_WarnAboutCashback),_CashbackSectionSimple=__webpack_require__(469),_CashbackSectionSimple2=_interopRequireDefault(_CashbackSectionSimple);exports["default"]=RewardsActivation},468:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(91),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(95),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(96),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(99),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(101),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),WarnAboutCashback=function(_Component){function WarnAboutCashback(){return(0,_classCallCheck3["default"])(this,WarnAboutCashback),(0,_possibleConstructorReturn3["default"])(this,(WarnAboutCashback.__proto__||(0,_getPrototypeOf2["default"])(WarnAboutCashback)).apply(this,arguments))}return(0,_inherits3["default"])(WarnAboutCashback,_Component),(0,_createClass3["default"])(WarnAboutCashback,[{key:"render",value:function(){var reward=this.props.reward;return _react2["default"].createElement("div",null,_react2["default"].createElement("h2",null,"oops, your credit was disabled."),"percentage"===reward.type?_react2["default"].createElement("h4",{className:"bold"},"reactivate ",_react2["default"].createElement("span",{className:"green"},reward.amount/100,"%")," back"):_react2["default"].createElement("h4",{className:"bold"},"reactivate ",_react2["default"].createElement("span",{className:"green"},"$",reward.amount/100)," back"),_react2["default"].createElement("div",{className:"button-wrapper"},this.props.activated?_react2["default"].createElement("button",{className:"primary-btn-large",disabled:!0},"activated"):this.props.activating?_react2["default"].createElement("button",{className:"primary-btn-large",disabled:!0},"activating"):_react2["default"].createElement("button",{className:"primary-btn-large",onClick:this.props.onActivateWarn},"ok")))}}]),WarnAboutCashback}(_react.Component);exports["default"]=WarnAboutCashback},469:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(91),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(95),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(96),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(99),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(101),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_hasFeature=__webpack_require__(374),_hasFeature2=_interopRequireDefault(_hasFeature),_isFullAccount=__webpack_require__(311),_isFullAccount2=_interopRequireDefault(_isFullAccount),_constants=__webpack_require__(193);__webpack_require__(470);var CashbackSection=function(_Component){function CashbackSection(props){(0,_classCallCheck3["default"])(this,CashbackSection);var _this=(0,_possibleConstructorReturn3["default"])(this,(CashbackSection.__proto__||(0,_getPrototypeOf2["default"])(CashbackSection)).call(this,props));return _this.state={isLoggedIn:(0,_isFullAccount2["default"])()},_this}return(0,_inherits3["default"])(CashbackSection,_Component),(0,_createClass3["default"])(CashbackSection,[{key:"render",value:function(){var reward=_lodash2["default"].get(this.props.view,"reward"),storeName=_lodash2["default"].get(this.props.view,"vendor"),deweyResult=_lodash2["default"].get(this.props.view,"deweyResult"),showRewardInNotification=_lodash2["default"].get(this.props.view,"showRewardInNotification"),cartTotal=(0,_hasFeature2["default"])("cb_notification_dollar_amt")&&_lodash2["default"].get(deweyResult,"pageData.order.total"),cbDollarAmt=void 0;cartTotal&&"percentage"===reward.type?reward.amount&&(cbDollarAmt=_lodash2["default"].round(cartTotal/100*(reward.amount/100),2)):"percentage"!==reward.type&&reward.amount&&(cbDollarAmt=reward.amount/100);var showOffer=this.props.activating||this.props.activated;return _react2["default"].createElement("div",{className:"simple-section"},showOffer?cbDollarAmt?_react2["default"].createElement("h2",null,"Activating ",_react2["default"].createElement("span",{className:"green"},"$",cbDollarAmt)," in credit"):_react2["default"].createElement("h2",null,"Activating ",_react2["default"].createElement("span",{className:"green"},reward.amount/100,"%")," back"):_react2["default"].createElement("h2",null,"Found 1 offer"),!showOffer&&showRewardInNotification?cbDollarAmt?_react2["default"].createElement("h4",null,_react2["default"].createElement("span",null,"$",cbDollarAmt)," in credit."):_react2["default"].createElement("h4",null,_react2["default"].createElement("span",null,reward.amount/100,"%")," back."):_react2["default"].createElement("h4",{className:"bold"},"on ",storeName,"."),this.state.isLoggedIn?_react2["default"].createElement("div",{className:"button-wrapper"},this.props.activated?_react2["default"].createElement("button",{className:"primary-btn-large",disabled:!0},"activated"):this.props.activating?_react2["default"].createElement("button",{className:"primary-btn-large",disabled:!0},"activating"):_react2["default"].createElement("button",{className:"primary-btn-large",onClick:this.props.onActivate},this.props.cta)):_react2["default"].createElement("div",{className:"button-wrapper"},_react2["default"].createElement("button",{className:"primary-btn-large",onClick:this.onClickSignIn.bind(this)},this.props.cta)))}},{key:"onClickSignIn",value:function(){var storeName=_lodash2["default"].get(this.props.view,"vendor");"eBay"!==storeName&&this.props.onActivate({preventHide:!this.state.hasClickedToLogin}),window.open(_constants.WIKIBUY_URL+"/sign-in"),this.setState({hasClickedToLogin:!0})}}]),CashbackSection}(_react.Component);exports["default"]=CashbackSection},470:196,471:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Gear(props){return _react2["default"].createElement("div",(0,_extends3["default"])({className:"wb-gear-icon"},props),_react2["default"].createElement("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},_react2["default"].createElement("g",null,_react2["default"].createElement("g",null,_react2["default"].createElement("g",null,_react2["default"].createElement("g",null,_react2["default"].createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.934,57.733C78.414,56.982,82,56.907,82,56.907      c1.101-0.023,2-0.942,2-2.042V47.73c0-1.1-0.896-2.077-1.993-2.171c0,0-5.176-0.443-7.981-1.128      c-0.227-0.055-0.227-0.055-0.227-0.055c-0.232-0.096-0.607-0.694-0.833-1.331c-0.226-0.637-0.8-2.894-0.626-3.679      c0,0,0,0,0.534-0.75c2.634-3.698,5.057-6.227,5.057-6.227c0.761-0.794,0.747-2.081-0.03-2.858l-5.047-5.046      c-0.777-0.778-2.064-0.792-2.859-0.031c0,0-2.758,2.64-6.464,4.692c-0.815,0.451-0.815,0.451-0.815,0.451      c-0.991,0.07-2.333-0.104-2.98-0.386c-0.648-0.282-2.469-1.024-2.519-1.206c0,0,0,0-0.03-0.181      c-0.749-4.479-0.832-9.075-0.832-9.075c-0.02-1.1-0.937-2-2.036-2h-7.136c-1.1,0-2.017,0.9-2.037,2c0,0-0.092,4.912-1.263,8.986      c-0.073,0.253-0.073,0.253-0.073,0.253c-0.12,0.258-0.592,0.599-1.048,0.757s-2.528,0.622-3.628,0.602      c0,0-0.09-0.001-1.037-0.525c-3.709-2.052-6.466-4.689-6.466-4.689c-0.794-0.761-2.081-0.747-2.859,0.031l-5.045,5.045      c-0.778,0.778-0.792,2.064-0.031,2.858c0,0,2.421,2.528,5.057,6.225c0.478,0.67,0.478,0.67,0.478,0.67      c0.187,0.707,0.078,1.85-0.243,2.539c-0.321,0.69-1.237,2.706-1.528,2.846c0,0,0,0-0.287,0.083      c-4.074,1.173-7.889,1.256-7.889,1.256c-1.1,0.023-2,0.943-2,2.043v7.135c0,1.1,0.9,2.02,2,2.043c0,0,3.5,0.074,7.981,0.825      c0.222,0.037,0.222,0.037,0.222,0.037c0.223,0.061,0.603,0.682,0.844,1.38c0.241,0.697,0.886,3.128,0.718,3.943      c0,0,0,0-0.556,0.78c-2.637,3.696-5.058,6.225-5.058,6.225c-0.761,0.794-0.747,2.081,0.031,2.858l5.046,5.046      c0.778,0.777,2.064,0.792,2.859,0.031c0,0,2.757-2.641,6.466-4.691c0.93-0.516,0.984-0.517,0.984-0.517      c1.1-0.028,2.371,0.106,2.825,0.301c0.455,0.193,1.844,0.928,2.035,1.29c0,0,0,0,0.105,0.366      c1.171,4.073,1.254,7.889,1.254,7.889c0.024,1.101,0.943,2,2.043,2h7.136c1.1,0,2.02-0.899,2.043-2c0,0,0.076-3.501,0.826-7.98      c0.043-0.253,0.043-0.253,0.043-0.253c0.071-0.251,0.645-0.63,1.274-0.842s3.126-0.854,4.223-0.814c0,0,0,0,0.902,0.498      c3.706,2.053,6.464,4.692,6.464,4.692c0.795,0.761,2.082,0.746,2.859-0.031l5.047-5.049c0.777-0.777,0.791-2.063,0.03-2.857      c0,0-2.423-2.526-5.057-6.224c-0.559-0.784-0.559-0.784-0.559-0.784c-0.168-0.818-0.065-2.031,0.228-2.694      c0.294-0.663,1.049-2.524,1.22-2.571C73.763,57.762,73.763,57.762,73.934,57.733z M50.68,65.321      c-7.763,0-14.057-6.292-14.057-14.056c0-7.765,6.294-14.056,14.057-14.056c7.766,0,14.057,6.291,14.057,14.056      C64.736,59.029,58.445,65.321,50.68,65.321z"
}),_react2["default"].createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.934,57.733C78.414,56.982,82,56.907,82,56.907      c1.101-0.023,2-0.942,2-2.042V47.73c0-1.1-0.896-2.077-1.993-2.171c0,0-5.176-0.443-7.981-1.128      c-0.227-0.055-0.227-0.055-0.227-0.055c-0.232-0.096-0.607-0.694-0.833-1.331c-0.226-0.637-0.8-2.894-0.626-3.679      c0,0,0,0,0.534-0.75c2.634-3.698,5.057-6.227,5.057-6.227c0.761-0.794,0.747-2.081-0.03-2.858l-5.047-5.046      c-0.777-0.778-2.064-0.792-2.859-0.031c0,0-2.758,2.64-6.464,4.692c-0.815,0.451-0.815,0.451-0.815,0.451      c-0.991,0.07-2.333-0.104-2.98-0.386c-0.648-0.282-2.469-1.024-2.519-1.206c0,0,0,0-0.03-0.181      c-0.749-4.479-0.832-9.075-0.832-9.075c-0.02-1.1-0.937-2-2.036-2h-7.136c-1.1,0-2.017,0.9-2.037,2c0,0-0.092,4.912-1.263,8.986      c-0.073,0.253-0.073,0.253-0.073,0.253c-0.12,0.258-0.592,0.599-1.048,0.757s-2.528,0.622-3.628,0.602      c0,0-0.09-0.001-1.037-0.525c-3.709-2.052-6.466-4.689-6.466-4.689c-0.794-0.761-2.081-0.747-2.859,0.031l-5.045,5.045      c-0.778,0.778-0.792,2.064-0.031,2.858c0,0,2.421,2.528,5.057,6.225c0.478,0.67,0.478,0.67,0.478,0.67      c0.187,0.707,0.078,1.85-0.243,2.539c-0.321,0.69-1.237,2.706-1.528,2.846c0,0,0,0-0.287,0.083      c-4.074,1.173-7.889,1.256-7.889,1.256c-1.1,0.023-2,0.943-2,2.043v7.135c0,1.1,0.9,2.02,2,2.043c0,0,3.5,0.074,7.981,0.825      c0.222,0.037,0.222,0.037,0.222,0.037c0.223,0.061,0.603,0.682,0.844,1.38c0.241,0.697,0.886,3.128,0.718,3.943      c0,0,0,0-0.556,0.78c-2.637,3.696-5.058,6.225-5.058,6.225c-0.761,0.794-0.747,2.081,0.031,2.858l5.046,5.046      c0.778,0.777,2.064,0.792,2.859,0.031c0,0,2.757-2.641,6.466-4.691c0.93-0.516,0.984-0.517,0.984-0.517      c1.1-0.028,2.371,0.106,2.825,0.301c0.455,0.193,1.844,0.928,2.035,1.29c0,0,0,0,0.105,0.366      c1.171,4.073,1.254,7.889,1.254,7.889c0.024,1.101,0.943,2,2.043,2h7.136c1.1,0,2.02-0.899,2.043-2c0,0,0.076-3.501,0.826-7.98      c0.043-0.253,0.043-0.253,0.043-0.253c0.071-0.251,0.645-0.63,1.274-0.842s3.126-0.854,4.223-0.814c0,0,0,0,0.902,0.498      c3.706,2.053,6.464,4.692,6.464,4.692c0.795,0.761,2.082,0.746,2.859-0.031l5.047-5.049c0.777-0.777,0.791-2.063,0.03-2.857      c0,0-2.423-2.526-5.057-6.224c-0.559-0.784-0.559-0.784-0.559-0.784c-0.168-0.818-0.065-2.031,0.228-2.694      c0.294-0.663,1.049-2.524,1.22-2.571C73.763,57.762,73.763,57.762,73.934,57.733z M50.68,65.321      c-7.763,0-14.057-6.292-14.057-14.056c0-7.765,6.294-14.056,14.057-14.056c7.766,0,14.057,6.291,14.057,14.056      C64.736,59.029,58.445,65.321,50.68,65.321z"})))))))}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=__webpack_require__(1),_extends3=_interopRequireDefault(_extends2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react);__webpack_require__(472),exports["default"]=Gear},472:196,473:196,474:196});