webpackJsonp([6],{0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _regenerator=__webpack_require__(57),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),init=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(0,_loadApp2["default"])({initialRoute:"/follow",cssUrl:"GENERATED/follow.css",route:_react2["default"].createElement(_reactRouter.Route,{path:"follow",component:_Follow2["default"]})});case 1:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}(),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_Follow=__webpack_require__(878),_Follow2=_interopRequireDefault(_Follow),_reactRouter=__webpack_require__(317),_loadApp=__webpack_require__(375),_loadApp2=_interopRequireDefault(_loadApp);"loading"!==document.readyState?init():document.addEventListener("DOMContentLoaded",init)},878:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(91),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(95),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(96),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(99),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(101),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(85),_react2=_interopRequireDefault(_react),_reactMotion=__webpack_require__(102),_baobab=__webpack_require__(121),_feedbackActions=__webpack_require__(879),_sendMetric=__webpack_require__(134),_sendMetric2=_interopRequireDefault(_sendMetric),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_toggleMatchSurvey=__webpack_require__(890),_toggleMatchSurvey2=_interopRequireDefault(_toggleMatchSurvey);__webpack_require__(891);var Follow=function(_Component){function Follow(){var _ref;(0,_classCallCheck3["default"])(this,Follow);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=(0,_possibleConstructorReturn3["default"])(this,(_ref=Follow.__proto__||(0,_getPrototypeOf2["default"])(Follow)).call.apply(_ref,[this].concat(args)));return _this.state={title:"Was this a good result?",subtitle:"Your feedback helps other wikibuyers.",hideNotification:!0,showReasons:!1,showComment:!1,selectedReasons:[],reasonText:"",dismiss:!1},_this}return(0,_inherits3["default"])(Follow,_Component),(0,_createClass3["default"])(Follow,[{key:"componentDidMount",value:function(){var _this2=this;(0,_sendMetric2["default"])("page","matchSurvey",{view:"matchSurvey",type:"notification",domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname,offerSignUp:_lodash2["default"].get(this.props.view,"offerSignUp"),qualified:_lodash2["default"].get(this.props.view,"qualified",!1),balance:_lodash2["default"].get(this.props.view,"balance",0)}),setTimeout(function(){_this2.setState({hideNotification:!1})},1e3)}},{key:"renderReasons",value:function(){function onChange(reason,e){var selectedReasons=this.state.selectedReasons,index=selectedReasons.indexOf(reason);index===-1?selectedReasons.push(reason):selectedReasons.splice(index,1),this.setState({selectedReasons:selectedReasons})}function onTextUpdate(e){var reasonText=e.target.value;this.setState({reasonText:reasonText})}var _this3=this,reasons=["Not the same product","Price is incorrect","Out of stock","Item condition","Bad seller","Other"],reasonDivs=void 0;return this.state.showReasons&&(reasonDivs=_lodash2["default"].map(reasons,function(reason,i){var checked=_this3.state.selectedReasons.indexOf(reason)!==-1;return _react2["default"].createElement("div",{className:"reason",key:_lodash2["default"].kebabCase(reason)},_react2["default"].createElement("input",{type:"checkbox",checked:checked,onChange:onChange.bind(_this3,reason),id:_lodash2["default"].kebabCase(reason)}),_react2["default"].createElement("label",{htmlFor:_lodash2["default"].kebabCase(reason)},_react2["default"].createElement("h5",{className:"text"},reason)))})),_react2["default"].createElement("div",{className:"reasons-wrapper"},reasonDivs,_react2["default"].createElement("textarea",{placeholder:"tell us more",value:this.state.reasonText,onChange:onTextUpdate.bind(this)}),_react2["default"].createElement("button",{className:"primary-btn-small",onClick:this.onSubmit.bind(this)},"Submit"))}},{key:"render",value:function(){var _this4=this,hideNotification=this.state.hideNotification,title=this.state.title,subtitle=this.state.subtitle,showOnTop=!1,showOnRight=!1,content=void 0;return content=this.state.showReasons||this.state.showComment?this.renderReasons():this.state.dismiss?_react2["default"].createElement("div",{className:"thanks-wrapper"}):_react2["default"].createElement("div",{className:"button-wrapper"},_react2["default"].createElement("button",{className:"secondary-btn-small",onClick:this.onYes.bind(this)},"Yes"),_react2["default"].createElement("button",{className:"secondary-btn-small",onClick:this.onNo.bind(this)},"No")),_react2["default"].createElement("div",{className:hideNotification?"disabled follow-page":"follow-page",style:{top:showOnTop?"0":"auto",bottom:showOnTop?"auto":"0",left:showOnRight?"auto":"0",right:showOnRight?"0":"auto"}},_react2["default"].createElement(_reactMotion.Motion,{style:{opacity:(0,_reactMotion.spring)(hideNotification?0:1,{stiffness:180,damping:20}),y:(0,_reactMotion.spring)(hideNotification?showOnTop?-100:100:0,{stiffness:180,damping:20})}},function(_ref2){var opacity=_ref2.opacity,y=_ref2.y;return _react2["default"].createElement("div",{className:"follow-notification",style:{transform:"translate3d(0,"+y+"%,0)",opacity:""+opacity}},_react2["default"].createElement("header",null,_react2["default"].createElement("div",{className:"w-icon-logo"},_this4.renderWIcon()),_react2["default"].createElement("div",{className:"close icon-x",onClick:_this4.onClosePopup.bind(_this4,"x")})),_react2["default"].createElement("section",null,_react2["default"].createElement("h2",null,title),subtitle?_react2["default"].createElement("h4",null,subtitle):null,content))}))}},{key:"onYes",value:function(){var data=_lodash2["default"].get(this.props,"view.resultData");(0,_feedbackActions.addVote)({up_votes:0,down_votes:0,id:"product."+_lodash2["default"].get(data,"details.product.wbpid"),wbpid:_lodash2["default"].get(data,"run.originResult.product.wbpid"),match_wbpid:_lodash2["default"].get(data,"details.product.wbpid"),upVote:!0}),this.onNotificationInteraction(),this.setState({match:!0,showComment:!0,title:"Great!",subtitle:"Would you like to leave any additional feedback for future wikibuyers?"});var metricData={match:!0,quoteId:data.run.id,matchId:data.details.id,notification:!0};(0,_sendMetric2["default"])("track","matchSurvey",metricData)}},{key:"onNo",value:function(){var data=_lodash2["default"].get(this.props,"view.resultData");(0,_feedbackActions.addVote)({up_votes:0,down_votes:0,id:"product."+_lodash2["default"].get(data,"details.product.wbpid"),wbpid:_lodash2["default"].get(data,"run.originResult.product.wbpid"),match_wbpid:_lodash2["default"].get(data,"details.product.wbpid"),upVote:!1}),this.onNotificationInteraction(),this.setState({match:!1,showReasons:!0,showComment:!0,title:"Uh oh!",subtitle:"What was wrong with this result?"});var metricData={match:!1,quoteId:data.run.id,matchId:data.details.id,notification:!0};(0,_sendMetric2["default"])("track","matchSurvey",metricData)}},{key:"onSubmit",value:function(){this.onNotificationInteraction();var data=_lodash2["default"].get(this.props,"view.resultData"),metricData={match:this.state.match,quoteId:data.run.id,matchId:data.details.id,notification:!0};this.state.reasonText&&(metricData.text=this.state.reasonText),this.state.selectedReasons&&this.state.selectedReasons.length&&(metricData.reason=_lodash2["default"].get(this.state.selectedReasons,"[0]"),metricData.reasons=this.state.selectedReasons),(0,_sendMetric2["default"])("track","matchSurveyReason",metricData),this.setState({dismiss:!0,showReasons:!1,showComment:!1,title:"Thanks for helping!",subtitle:"The next wikibuyer will benefit from your contribution."});var t=this;setTimeout(function(){t.onClosePopup("submit")},3200)}},{key:"onClosePopup",value:function(label){this.onNotificationInteraction(),this.setState({hideNotification:!0}),(0,_sendMetric2["default"])("trackClick","dismissMatchSurvey",label,{domain:location.hostname.replace(/^www\./,""),pagePath:location.pathname})}},{key:"onNotificationInteraction",value:function(){(0,_toggleMatchSurvey2["default"])(_lodash2["default"].get(this.props,"view.resultData"))}},{key:"renderWIcon",value:function(){return _react2["default"].createElement("svg",{id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 60 45"},_react2["default"].createElement("g",null,_react2["default"].createElement("path",{d:"M39.4,35.9h-9L25,19.1h-0.1l-5.2,16.8h-9L1.3,8.8h9.6L15.7,26h0.1l4.9-17.2h8.9l5,17.2h0.1l4.8-17.2h9.3 L39.4,35.9z M57.7,31.6c0,0.7-0.1,1.4-0.4,2c-0.2,0.6-0.6,1.1-1,1.6c-0.4,0.4-1,0.8-1.7,1s-1.3,0.3-2,0.3c-1.5,0-2.7-0.5-3.7-1.4 c-1-0.9-1.4-2-1.4-3.5c0-0.7,0.1-1.3,0.4-1.8c0.2-0.7,0.6-1.3,1-1.6c0.8-0.7,1.4-1,1.7-1.1c0.9-0.3,1.6-0.4,2-0.4 c0.7,0,1.4,0.1,2,0.4c0.7,0.2,1.2,0.6,1.7,1c0.3,0.3,0.7,0.8,1.1,1.6C57.6,30.2,57.7,30.8,57.7,31.6z"})))}}]),Follow}(_react.Component);exports["default"]=(0,_baobab.branch)({view:["followView"],events:["events"],session:["session"]},Follow)},879:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getTypePlural(type){return type="video"===type?"review":type,"advice"===type?type:type+"s"}function getFeedbackById(id,parentId){var type=(parentId||id).split(".")[0];"video"===type&&(type="review");var feedbackData=_state2["default"].get(["ProductPage","feedbackData"]),feedback=void 0;if(parentId){var parentFeedback=_lodash2["default"].find(feedbackData[getTypePlural(type)],{id:parentId});feedback=_lodash2["default"].find(_lodash2["default"].get(parentFeedback,"comments"),{id:id})}else feedbackData&&(feedback=_lodash2["default"].find(feedbackData[getTypePlural(type)],{id:id}));return{feedback:feedback,type:type}}function setUpdatedFeedback(_ref2){var feedback=_ref2.feedback,updatedFeedback=_ref2.updatedFeedback,type=_ref2.type,data=_ref2.data;if(data.parent_id){var parentCursor=_state2["default"].select(["ProductPage","feedbackData",getTypePlural(type),{id:data.parent_id}]);parentCursor.set(["comments",{id:data.id}],updatedFeedback),data.parent_id===_state2["default"].get(["selectedFeedback","id"])&&_state2["default"].set(["selectedFeedback","comments",{id:data.id}],updatedFeedback)}else _state2["default"].merge(["ProductPage","feedbackData",getTypePlural(type),{id:data.id}],updatedFeedback),feedback.id===_state2["default"].get(["selectedFeedback","id"])&&_state2["default"].set(["selectedFeedback"],updatedFeedback)}function pushNewFeedback(_ref3){var feedback=_ref3.feedback,type=_ref3.type,items=_state2["default"].get(["ProductPage","feedbackData",getTypePlural(type)]);items&&(items.push(feedback),_state2["default"].set(["ProductPage","feedbackData",getTypePlural(type)],items),_state2["default"].commit())}function clearSelectedFeedback(){_state2["default"].set(["selectedFeedback"],null),_state2["default"].set(["selectedFeedbackComments"],[])}function setAddFeedbackType(type){var productUrl=_state2["default"].get(["ProductPage","productData","url"]),runId=_state2["default"].get(["ProductPage","run","id"]);productUrl?window.open(""+_constants.WIKIBUY_URL+productUrl+(runId?"?run="+runId:"")):(_state2["default"].set(["addFeedbackType"],type),clearSelectedFeedback())}function clearAddFeedbackType(){_state2["default"].set(["addFeedbackType"],null)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addData=exports.getMetaData=exports.deleteAdvice=exports.addAdvice=exports.deleteComment=exports.addComment=exports.setSelectedFeedbackId=exports.deleteVote=exports.addVote=void 0;var _regenerator=__webpack_require__(57),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(84),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),refreshFeedbackData=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){var product,asin,meta,userId,wbpid,feedback;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return product=_state2["default"].get(["ProductPage","inputData","product"]),asin=_state2["default"].get(["ProductPage","inputData","asin"]),meta=_state2["default"].get(["ProductPage","inputData","feedback"]),userId=_state2["default"].get(["session","id"]),wbpid=product&&product.wbpid?product.wbpid:"amazon.com_"+asin,_context.next=7,(0,_getFeedbackData2["default"])({wbpid:wbpid,userId:userId,product:product,meta:meta});case 7:feedback=_context.sent,_state2["default"].set(["ProductPage","feedbackData"],feedback);case 9:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}(),updateComments=function(){var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(feedback){var run,asin,wbpid,comments;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return run=_state2["default"].get(["ProductPage","run"]),asin=_state2["default"].get(["ProductPage","inputData","asin"]),wbpid=feedback.wbpid||_lodash2["default"].get(run,"originResult.product.wbpid")||"amazon.com_"+asin,_context2.next=5,(0,_fetchComments2["default"])({wbpid:wbpid,id:feedback.id,page_size:20});case 5:comments=_context2.sent,_state2["default"].set(["selectedFeedbackComments"],comments);case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref4.apply(this,arguments)}}(),setSelectedFeedbackId=(exports.addVote=function(){var _ref5=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(data){var userId,_getFeedbackById,feedback,type,patchFeedback,updatedFeedback,item;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return patchFeedback=function(feedback){return feedback=_lodash2["default"].clone(feedback),feedback.up_votes=feedback.up_votes||0,feedback.down_votes=feedback.down_votes||0,feedback.up_votes=data.upVote?feedback.up_votes+1:feedback.up_votes,feedback.down_votes=data.upVote?feedback.down_votes:feedback.down_votes+1,"up_vote"===feedback.vote_selection&&(feedback.up_votes-=1),"down_vote"===feedback.vote_selection&&(feedback.down_votes-=1),feedback.vote_selection=data.upVote?"up_vote":"down_vote",feedback},userId=_state2["default"].get(["session","id"]),_getFeedbackById=getFeedbackById(data.id,data.parent_id),feedback=_getFeedbackById.feedback,type=_getFeedbackById.type,feedback?(updatedFeedback=patchFeedback(feedback),setUpdatedFeedback({feedback:feedback,updatedFeedback:updatedFeedback,type:type,data:data})):(item=patchFeedback(data),pushNewFeedback({feedback:item,type:type})),_context3.next=6,(0,_addVote2["default"])(_lodash2["default"].assign({userId:userId},data));case 6:return _context3.next=8,refreshFeedbackData();case 8:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2){return _ref5.apply(this,arguments)}}(),exports.deleteVote=function(){var _ref6=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(data){var userId,_getFeedbackById2,feedback,type,updatedFeedback;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return userId=_state2["default"].get(["session","id"]),_getFeedbackById2=getFeedbackById(data.id,data.parent_id),feedback=_getFeedbackById2.feedback,type=_getFeedbackById2.type,feedback&&(updatedFeedback=_lodash2["default"].clone(feedback),"up_vote"===updatedFeedback.vote_selection&&(updatedFeedback.up_votes-=1),"down_vote"===updatedFeedback.vote_selection&&(updatedFeedback.down_votes-=1),updatedFeedback.vote_selection=null,setUpdatedFeedback({feedback:feedback,updatedFeedback:updatedFeedback,type:type,data:data})),_context4.next=5,(0,_deleteVote2["default"])(_lodash2["default"].assign({userId:userId},data));case 5:return _context4.next=7,refreshFeedbackData();case 7:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3){return _ref6.apply(this,arguments)}}(),exports.setSelectedFeedbackId=function(){var _ref7=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee5(data){var _getFeedbackById3,feedback,type;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:_getFeedbackById3=getFeedbackById(data.id),feedback=_getFeedbackById3.feedback,feedback?(_state2["default"].set(["selectedFeedback"],feedback),updateComments(feedback)):(type=data.id.split(".")[0],pushNewFeedback({feedback:data,type:"video"===type?"review":type}),setSelectedFeedbackId(data)),clearAddFeedbackType();case 3:case"end":return _context5.stop()}},_callee5,this)}));return function(_x4){return _ref7.apply(this,arguments)}}());exports.addComment=function(){var _ref8=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee6(_ref9){var userId,email,run,asin,_getFeedbackById4,feedback,wbpid=_ref9.wbpid,id=_ref9.id,comment=_ref9.comment,feedbackId=_ref9.feedbackId,username=_ref9.username;return _regenerator2["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return userId=_state2["default"].get(["session","id"]),email=_state2["default"].get(["session","email"]),run=_state2["default"].get(["ProductPage","run"]),asin=_state2["default"].get(["ProductPage","inputData","asin"]),wbpid=wbpid||_lodash2["default"].get(run,"originResult.product.wbpid")||"amazon.com_"+asin,_context6.next=7,(0,_addComment2["default"])({wbpid:wbpid,id:id,username:username||(email&&email.indexOf("shadow.wikibuy.com")===-1?email.split("@")[0]:"anonymous"),comment:comment,userId:userId});case 7:return _context6.next=9,updateComments({id:feedbackId});case 9:_getFeedbackById4=getFeedbackById(feedbackId),feedback=_getFeedbackById4.feedback,setUpdatedFeedback({feedback:feedback,updatedFeedback:_lodash2["default"].assign(feedback,{comment_count:feedback.comment_count+1}),type:feedback.type,data:{id:feedbackId}}),username&&username!==_state2["default"].get(["settings","username"])&&_state2["default"].set(["settings","username"],username);case 12:case"end":return _context6.stop()}},_callee6,this)}));return function(_x5){return _ref8.apply(this,arguments)}}(),exports.deleteComment=function(){var _ref10=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee7(_ref11){var userId,_getFeedbackById5,feedback,_getFeedbackById6,_feedback,id=_ref11.id,feedbackId=(_ref11.wbpid,_ref11.parent_id,_ref11.feedbackId);return _regenerator2["default"].wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return userId=_state2["default"].get(["session","id"]),_context7.next=3,(0,_deleteComment2["default"])({id:id,userId:userId});case 3:return _context7.next=5,updateComments({id:feedbackId});case 5:_getFeedbackById5=getFeedbackById(feedbackId),feedback=_getFeedbackById5.feedback,setUpdatedFeedback({feedback:feedback,updatedFeedback:_lodash2["default"].assign(feedback,{comment_count:feedback.comment_count-1}),type:feedback.type,data:{id:feedbackId}}),feedbackId===_state2["default"].get(["selectedFeedback","id"])&&(_getFeedbackById6=getFeedbackById(feedbackId),_feedback=_getFeedbackById6.feedback,_state2["default"].set(["selectedFeedback"],_feedback));case 8:case"end":return _context7.stop()}},_callee7,this)}));return function(_x6){return _ref10.apply(this,arguments)}}(),exports.addAdvice=function(){var _ref12=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee8(_ref13){var run,userId,email,asin,wbpid,resp,text=_ref13.text,username=_ref13.username;return _regenerator2["default"].wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return run=_state2["default"].get(["ProductPage","run"]),userId=_state2["default"].get(["session","id"]),email=_state2["default"].get(["session","email"]),asin=_state2["default"].get(["ProductPage","inputData","asin"]),wbpid=_lodash2["default"].get(run,"originResult.product.wbpid")||"amazon.com_"+asin,_context8.next=7,(0,_addAdvice2["default"])({wbpid:wbpid,username:username||(email&&email.indexOf("shadow.wikibuy.com")===-1?email.split("@")[0]:"anonymous"),text:text,userId:userId});case 7:return resp=_context8.sent,_context8.next=10,refreshFeedbackData();case 10:return username&&username!==_state2["default"].get(["settings","username"])&&_state2["default"].set(["settings","username"],username),_context8.abrupt("return",resp);case 12:case"end":return _context8.stop()}},_callee8,this)}));return function(_x7){return _ref12.apply(this,arguments)}}(),exports.deleteAdvice=function(){var _ref14=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee9(_ref15){var userId,id=_ref15.id;_ref15.wbpid;return _regenerator2["default"].wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return userId=_state2["default"].get(["session","id"]),_context9.next=3,(0,_deleteAdvice2["default"])({id:id,userId:userId});case 3:return _context9.next=5,refreshFeedbackData();case 5:case"end":return _context9.stop()}},_callee9,this)}));return function(_x8){return _ref14.apply(this,arguments)}}(),exports.getMetaData=function(){var _ref16=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee10(){var data,_args10=arguments;return _regenerator2["default"].wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,_getMetaData2["default"].apply(void 0,_args10);case 2:return data=_context10.sent,_context10.abrupt("return",data);case 4:case"end":return _context10.stop()}},_callee10,this)}));return function(){return _ref16.apply(this,arguments)}}(),exports.addData=function(){var _ref17=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee11(type,data){var run,asin,wbpid,originTitle,userId,feedback,submittedFeedback;return _regenerator2["default"].wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return run=_state2["default"].get(["ProductPage","run"]),asin=_state2["default"].get(["ProductPage","inputData","asin"]),wbpid=_lodash2["default"].get(run,"originResult.product.wbpid")||"amazon.com_"+asin,originTitle=_lodash2["default"].get(run,"originResult.product.title"),userId=_state2["default"].get(["session","id"]),_context11.next=7,(0,_addFeedbackData2["default"])(_lodash2["default"].assign({},data,{type:type,wbpid:wbpid,userId:userId,originTitle:originTitle}));case 7:return _context11.next=9,_bluebird2["default"].resolve().delay(1e3);case 9:return _context11.next=11,refreshFeedbackData();case 11:return feedback=_state2["default"].get(["ProductPage","feedbackData",getTypePlural(type)]),submittedFeedback=_lodash2["default"].find(feedback,function(f){return f.title===data.title&&f.user_id===userId}),_context11.abrupt("return",submittedFeedback);case 14:case"end":return _context11.stop()}},_callee11,this)}));return function(_x9,_x10){return _ref17.apply(this,arguments)}}();exports.clearSelectedFeedback=clearSelectedFeedback,exports.setAddFeedbackType=setAddFeedbackType,exports.clearAddFeedbackType=clearAddFeedbackType;var _addVote=__webpack_require__(880),_addVote2=_interopRequireDefault(_addVote),_deleteVote=__webpack_require__(881),_deleteVote2=_interopRequireDefault(_deleteVote),_getFeedbackData=__webpack_require__(882),_getFeedbackData2=_interopRequireDefault(_getFeedbackData),_addComment=__webpack_require__(883),_addComment2=_interopRequireDefault(_addComment),_deleteComment=__webpack_require__(884),_deleteComment2=_interopRequireDefault(_deleteComment),_getMetaData=__webpack_require__(885),_getMetaData2=_interopRequireDefault(_getMetaData),_addFeedbackData=__webpack_require__(886),_addFeedbackData2=_interopRequireDefault(_addFeedbackData),_addAdvice=__webpack_require__(887),_addAdvice2=_interopRequireDefault(_addAdvice),_deleteAdvice=__webpack_require__(888),_deleteAdvice2=_interopRequireDefault(_deleteAdvice),_fetchComments=__webpack_require__(889),_fetchComments2=_interopRequireDefault(_fetchComments),_constants=__webpack_require__(193),_lodash=__webpack_require__(143),_lodash2=_interopRequireDefault(_lodash),_bluebird=__webpack_require__(148),_bluebird2=_interopRequireDefault(_bluebird),_state=__webpack_require__(141),_state2=_interopRequireDefault(_state)},880:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("addVote",data)}},881:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("deleteVote",data)}},882:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("getFeedbackData",data)}},883:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("addComment",data)}},884:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("deleteComment",data)}},885:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("getMetaData",data)}},886:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("addFeedbackData",data)}},887:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("addAdvice",data)}},888:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("deleteAdvice",data)}},889:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("fetchComments",data)}},890:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _messenger=__webpack_require__(135),_messenger2=_interopRequireDefault(_messenger);exports["default"]=function(data){return(0,_messenger2["default"])("toggleMatchSurvey",data)}},891:196});